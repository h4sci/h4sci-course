<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Hacking for Social Sciences</title>
    <meta charset="utf-8" />
    <meta name="author" content="Matt Bannert (@whatsgoodio)" />
    <meta name="date" content="2021-10-22" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/robot-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="more.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# <p>Hacking for Social Sciences</p>
## Programming with Data
### Matt Bannert (<span class="citation">@whatsgoodio</span>)
### KOF, ETH Zurich
### 2021-10-22

---


class: center,middle

# Data in Social Sciences


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 


---


## Data Generating Processes: Simulation


.pull-left[

### Why ? 

- Analyzing Complex Systems
- Demos
- Proposals / Grants

]


.pull-right[

### Process


```r
set.seed(123)
rnorm(3)
```

```
## [1] -0.5604756 -0.2301775  1.5587083
```

```r
set.seed(1)
rnorm(3)
```

```
## [1] -0.6264538  0.1836433 -0.8356286
```

```r
set.seed(123)
rnorm(3)
```

```
## [1] -0.5604756 -0.2301775  1.5587083
```



]



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 



---


## Data Generating Processes: Logging / Tracking


.pull-left[

### Process

- webservers,
- mobile phones
- IoT devices
- tracking tools, e.g., Google Analytics

]

.pull-right[

### Form of Resulting Data 

- text files
- granular
- event based
- biased (tracking)

]

&lt;br&gt;
&lt;br&gt;

-&gt; [full_log](https://github.com/h4sci/h4sci-course/blob/master/data/logs.txt)

```
2020-10-21T09:03:09.051775+00:00 shinyapps[3063962]: Running on host: 28475eb5e3ba
...
2020-10-21T09:03:09.058121+00:00 shinyapps[3063962]: RJSONIO version: (none)
2020-10-21T09:03:09.058127+00:00 shinyapps[3063962]: htmltools version: 0.4.0

```


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 


---


## Data Generating Processes: Surveys


.pull-left[

### Process

- multi mode surveys (paper / online forms)
- Recordings

]

.pull-right[

### Form of Resulting Data 

- rectangular data (1-line-1-observation)
- text 
- cross sectional 
- longitudinal data


]


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 


---


## Data Generating Processes: APIs, Web Scraping


.pull-left[

### Process

- Automated, regular updates
- Transformation of structured data into analysis friendly datasets (regular expressions, DOM extraction)

]

.pull-right[

### Form of Resulting Data 

- text strings
- nested data
- standardized data

]



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 



---



class:center,middle

## What DGPs Have You Worked With? 

## What DGPs Do You Expect to Face in Your Work ? 


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 


---

## Ways to Represent Data


.pull-left[

### In Memory

- vector
- matrix
- data.frame / data.table / tibble
- list
- environment


]

.pull-right[

### On Disk

- .RData 
- feather
- .xlsx
- .csv
- .json
- .xml



### In a Database

- interface
- query language, e.g., SQL


]


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 


---




## Types of Datasets: Time Series
  

.pull-left[


```r
library(kofdata)
library(tstools)

tsl &lt;- window(get_time_series("ch.kof.barometer"))
tsplot("KOF Barometer" = 
         window(tsl$ch.kof.barometer,
                start = c(2010,1))
       )
```

![](block2_session_2_files/figure-html/unnamed-chunk-2-1.png)&lt;!-- --&gt;


]  


.pull-right[

**in memory**

- ts
- xts
- tsibble
- zoo

&gt; (!) Try out the `tsbox` R package to easily switch from one representation 
to another.


**on disk**

- [.csv](https://github.com/swissdata/demo) (long format, wide format)
- [.xml](https://www.nsdp.admin.ch/variable/72.xml)
- .json
- .RData


]

&lt;br&gt;
&lt;br&gt;






&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 
  

---

## Types of Datasets: Rectangular Data


### Cross Sectional Data


```r
head(mtcars)
```

```
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

- multiple variables
- one period


### Panel Data

- multiple variables
- longitudinal
- e.g., German Socio Economic Panel (GSOEP)


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 


---


  
## Types of Datasets: Nested Data


```r
l &lt;- list()
l$element1 &lt;- 2
l$element2 &lt;- head(mtcars,4)
l
```

```
## $element1
## [1] 2
## 
## $element2
##                 mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4      21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag  21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710     22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
```

examples: [meta information](https://github.com/swissdata/demo), sector classification (hierarchical), GDP components, translations, attributes, properties, [Geo spatial data](https://github.com/mbannert/maps/blob/master/ch_bfs_regions.geojson)


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 



---

class:center,middle

## Block 2, Task 1: [Representing Datasets in Memory and on Disk](https://github.com/h4sci/h4sci-tasks/issues/6)



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


class:center,middle

# R Three Ecosystems to Manipulate Data



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## Base R


.pull-left[

- vectors, matrices, data.frames 
- no extensions needed
- much better than its marketing
- split, apply, combine approach

]


.pull-right[


```r
by_cyl &lt;- split(mtcars, mtcars$cyl)
out &lt;- lapply(by_cyl,
              function(x) summary(
                lm(mpg~.,data = x)
                )
              )

str(out, max.level = 1)
```

```
## List of 3
##  $ 4:List of 11
##   ..- attr(*, "class")= chr "summary.lm"
##  $ 6:List of 11
##   ..- attr(*, "class")= chr "summary.lm"
##  $ 8:List of 11
##   ..- attr(*, "class")= chr "summary.lm"
```



]



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## data.table

- written by Matt Dowle et al.
- fastest ecosystem 
- SQL reminiscant concept and syntax
- works with pointers / reference -&gt; it changes objects in place



```r
library(data.table)
dt &lt;- fread("../data/prog-feedback.csv")
head(dt)
```

```
##                                  id basic advanced structure
## 1: fce47411265590a95af4758d052c385b     4        3         2
## 2: c99233e40a199073d04e363c3983f620     5        2         3
## 3: f6bf7fa82ec4a3189885ff79d3c2c466     3        2         3
## 4: a5ee38b7085c48b1b828fa16d3c42d18     3        1         1
## 5: ee0201113dc3c7e943ab4b516e20930a     3        3         2
## 6: e066a0f7df56cf7136058f5599cfd098     6        3         5
```


```r
# i, j, by
dt[, obs_avg := rowMeans(.SD), .SDcols = c("basic", "advanced", "structure")]
head(dt)
```


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 


---


## data.table

- written by Matt Dowle et al.
- fastest ecosystem 
- SQL reminiscant concept and syntax
- works with pointers / reference -&gt; it changes objects in place



```r
library(data.table)
dt &lt;- fread("../data/prog-feedback.csv")


# i, j, by
dt[, obs_avg := rowMeans(.SD), .SDcols = c("basic", "advanced", "structure")]
head(dt)
```

```
##                                  id basic advanced structure  obs_avg
## 1: fce47411265590a95af4758d052c385b     4        3         2 3.000000
## 2: c99233e40a199073d04e363c3983f620     5        2         3 3.333333
## 3: f6bf7fa82ec4a3189885ff79d3c2c466     3        2         3 2.666667
## 4: a5ee38b7085c48b1b828fa16d3c42d18     3        1         1 1.666667
## 5: ee0201113dc3c7e943ab4b516e20930a     3        3         2 2.666667
## 6: e066a0f7df56cf7136058f5599cfd098     6        3         5 4.666667
```



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---




## tidyverse


- dplyr, tibble, .... 
- best documentation
- fast
- uses references, too
- very popular for interactive use
- pipe operator: %&gt;% (base R got a pipe in the meantime, too)
- pretty printing



```r
library(dplyr)
mtcars %&gt;% 
  filter(cyl &gt; 4) %&gt;% 
  nrow()
```

```
## [1] 21
```


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


class:center,middle

## Block 2, Task 2: [Three R Ecosystems to Manipulate Data](https://github.com/h4sci/h4sci-tasks/issues/7)



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


class:center,middle

# Databases (DBMS)


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## When to Use a Database? 


### Passively

- direct access 
- no API
- flexible queries needed


### Actively (in the sense of setting it up, running it)

- as a backend e.g., survey (transactional database)
- in research projects when you want to share data inside your lab
- when you need to restrict access at different levels
- to expose data through an API (to external collaborators or the public)
- need to [integrate with different systems / tools and programming languages](https://github.com/mbannert/timeseriesdb/blob/ca3939a5686f0e68bc3d5cb828d0891795a4eac3/inst/sql/create_functions_collections.sql#L63)
- specific operations, e.g., spatial data


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## Which DBMS to Use?

1. **relational** DBMS should be the **default choice**, don't believe me? Believe [him](https://blog.jooq.org/tag/mongodb/). Note, you can use json inside SQL DBs 
as well. 

2. Which relational DBMS should I Use? 

- SQLite is for prototypes and mobile phones
- MySQL is for kids
- PostgreSQL, MS SQL and Oracle are at the same level for most social sciences
applications


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## Can You Explain 'Relational'

&lt;img src="timeseriesdb_1_0.png" width="800px"&gt;



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## Are There Any Disadvantages of Databases?

- You have to maintain them, even if you don't need them
- more setup overhead: dev and production system(s) needed
- solid, free solutions are only temporal
- you need an interface for collaborators who don't speak SQL
- some really, really, really big datasets may ask for specific methods



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## How Can I Get Going?

### Hosting

- localhost (dev only)
- docker environment 
- university VM
- homeserver
- cloud (either VM and install on your own, or DB specific Cloud)

### Client

- install drivers locally at OS level
- install client library (R packages are usually wrappers around C interfaces)

### Design

- integrity (think primary key, foreign key for starters) 
- Draw up a design... [dbdiagram.io](https://dbdiagram.io/) is fun tool,
paper &amp; pencil also work pretty well



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---


## Start Simple, Catch a Breath of SQL Air with SQLite



```r
library(RSQLite)
db_path = "../data/h4sci.sqlite3"
con &lt;- dbConnect(RSQLite::SQLite(), db_path)
dbWriteTable(con, dbQuoteIdentifier(con,"mtcars"), mtcars, overwrite = T)
dbWriteTable(con, dbQuoteIdentifier(con,"flowers"), iris, overwrite = T)

dbGetQuery(con, "SELECT * FROM flowers LIMIT 3")
```

```
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
```

```r
dbGetQuery(con, "SELECT * FROM mtcars WHERE mpg &gt; 30")
```

```
##    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## 1 32.4   4 78.7  66 4.08 2.200 19.47  1  1    4    1
## 2 30.4   4 75.7  52 4.93 1.615 18.52  1  1    4    2
## 3 33.9   4 71.1  65 4.22 1.835 19.90  1  1    4    1
## 4 30.4   4 95.1 113 3.77 1.513 16.90  1  1    5    2
```

Note: Foreign Key Handling is [very limited in SQLite](https://stackoverflow.com/questions/1884818/how-do-i-add-a-foreign-key-to-an-existing-sqlite-table). 



&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 

---




## Accessing Other SQL Databases


.pull-left[

### SQLite


```r
library(RSQLite)
db_path = "../data/h4sci.sqlite3"
con &lt;- dbConnect(RSQLite::SQLite(),
                 db_path)
```



]

.pull-right[

### Postgres


```r
# some little test setup for a local docker based db (using docker desktop)
# docker run --rm -d -p 1111:5432 --name h4sci -e POSTGRES_PASSWORD=pgking  postgres:12.3
# psql -p 1111 -h 'localhost' -d postgres -U postgres
library(RPostgres)
con &lt;-  dbConnect(drv = Postgres(),
                  dbname = "postgres",
                  user = "postgres",
                  host = "some.server.or.ip",
                  password = .rs.askForPassword(
                    "enter your pw"
                    )
                  )
```



]


&lt;br&gt;
&lt;br&gt;

- Essentially the same interface (DBI)
- server, files are abstracted away
- (remote) url
- host, password, port etc. needed for Postgres


&lt;div class="my-footer"&gt;&lt;span&gt;&lt;div class="footer-text" align="right"&gt;"Hacking for Social Sciences" by Dr. Matthias Bannert is licensed under &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"&gt;CC BY-NC-SA 4.0&lt;/a&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt; 



---

## Basic SQL Syntax

.pull-left[

### SQL

```sql
SELECT * FROM schema.table;

INSERT INTO schema.table VALUES ('abc',2,3);

SELECT name, salary FROM staff
WHERE position = 'manager'
ORDER BY salary DESC;




```

]

.pull-right[

### Explanation

- '*' SELECTs all data from a given table
- INSERTs values to a table while checking integrity (data types)
- SELECTs name and salary from table staff for all managers and 
orders the output by salary from highest to lowest

]

&lt;br&gt;
&lt;br&gt;

### Further Reads

- [SQLite Tutorial](https://www.sqlitetutorial.net/)
- [PostgreSQL 12 Documentation](https://www.postgresql.org/docs/12/index.html) (Jump in at 'table basics')
- [Vignettes of the {dm} package](https://cran.r-project.org/web/packages/dm/index.html), in particular the [data.frame to dm part](https://cran.r-project.org/web/packages/dm/vignettes/howto-dm-df.html)

---

class:center,middle

## Block 2, Task 3: [A Little SQL](https://github.com/h4sci/h4sci-tasks/issues/8)


---

## How to Work with an Application Programming Interface (API)

1. RTFM

2. Experiment 'per pedes'

3. Write a Wrapper

4. Use the Wrapper


Here is [an R example](https://github.com/h4sci/h4sci-course/blob/master/examples/met_api.R) to get ☔️ images from the 
MET collection. 





















    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
